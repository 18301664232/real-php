var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},mcjs;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(createjs.Container);t.BaseView=e}(e=t.ui||(t.ui={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.addDefaultBg(),t}return __extends(i,e),i.prototype.cache=function(){e.prototype.cache.call(this,0,0,t.logic.LayoutManager.stageWidth,t.logic.LayoutManager.stageHeight)},i.prototype.getPageBitmapData=function(){return this.cache(),createjs.BitmapData.getBitmapData(this)},i.prototype.removeDefaultBg=function(){this.removeChild(this.bgShape),this.bgShape=null},i.prototype.addDefaultBg=function(e){void 0===e&&(e="#00"),this.bgShape&&this.removeDefaultBg(),this.bgShape=new createjs.Shape,this.bgShape.graphics.beginFill(e),this.bgShape.graphics.drawRect(0,0,t.logic.LayoutManager.stageWidth,t.logic.LayoutManager.stageHeight),this.bgShape.graphics.endFill(),this.bgShape.alpha=0,this.addChildAt(this.bgShape,0)},i.prototype.onBrowserPopState=function(e){null!=e.data&&null!=e.data.page&&t.logic.ViewManager.addView(e.data.page,{fromPopState:!0})},i.prototype.onIntroStart=function(t){this.viewData.isIntroStart||(this.viewData.isIntroStart=!0,console.log(this.pageName,"onIntroStart"),!this.viewData.userData.withoutHistory,this.dispatchEvent(new createjs.Event(i.INTRO_START)))},i.prototype.onIntroFinished=function(t){this.viewData.isIntroFinished||(this.viewData.isIntroFinished=!0,console.log(this.pageName,"onIntroFinished"),this.dispatchEvent(new createjs.Event(i.INTRO_FINISHED)))},i.prototype.onOutroStart=function(t){this.viewData.isOutroStart||(this.viewData.isOutroStart=!0,console.log(this.pageName,"onOutroStart"),this.dispatchEvent(new createjs.Event(i.OUTRO_START)))},i.prototype.onOutroFinished=function(t){this.viewData.isOutroFinished||(this.viewData.isOutroFinished=!0,console.log(this.pageName,"onOutroFinished"),this.dispatchEvent(new createjs.Event(i.OUTRO_FINISHED)))},i.prototype.startPage=function(){this.onIntroStart()},i.prototype.closePage=function(){this.onOutroStart()},i.prototype.onAddToStage=function(t){this.removeAllEventListeners("added")},i.prototype.init=function(){this.on("added",this.onAddToStage,this),this.dispatchEvent(new createjs.Event(i.PAGE_INIT))},i}(t.ui.BaseView);i.INTRO_START="intro_start",i.INTRO_FINISHED="intro_finished",i.OUTRO_START="outro_start",i.OUTRO_FINISHED="intro_start",i.PAGE_INIT="page_init",e.PageView=i}(e=t.ui||(t.ui={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(){function t(){}return t.addEventListener=function(t,e,i){null==this.disp&&(this.disp=new createjs.EventDispatcher),this.disp.addEventListener(t,e,i)},t.dispatchEvent=function(t){null!=this.disp&&this.disp.dispatchEvent(t)},t.removeEventListener=function(t,e,i){null!=this.disp&&this.disp.removeEventListener(t,e,i)},t.off=function(t,e,i,n){null!=this.disp&&this.disp.off(t,e,i,n)},t.on=function(t,e,i,n,a,s){null==this.disp&&(this.disp=new createjs.EventDispatcher),this.disp.on(t,e,i,n,a,s)},t}();t.StaticEventDispatcher=e}(e=t.event||(t.event={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(){function e(e){this.direction=t.EffectDirection.B_T,this.duration=500,this.ease=createjs.Ease.none,this.formateData(e)}return e.prototype.formateData=function(e){for(var i in e)switch(i){case"key":try{this.key=t.EffectType[e[i]]}catch(i){console.error("not found effect key:",e),this.key=t.EffectType.push}break;case"direction":try{this.direction=t.EffectDirection[e[i]]}catch(i){console.error("not found effect direction:",e),this.direction=t.EffectDirection.B_T}break;case"duration":try{this.duration=1e3*Number(e[i])}catch(t){console.error("not found effect duration:",e),this.duration=500}break;case"ease":try{this.ease=createjs.Ease[e[i]]||createjs.Ease.none}catch(t){console.error("not found effect ease:",e),this.ease=createjs.Ease.none}break;case"color":this.color=e[i]}},e}();t.EffectOption=e}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,n){var a=e.call(this)||this;return console.log("isWebGL",t.logic.LayoutManager.spriteStage.isWebGL),a.webgl=!1,a.transitionContainer=t.logic.ViewManager.transitionContainer,a.transitionContainer.visible=!0,a.setPage(i,n),a}return __extends(i,e),i.prototype.setPage=function(t,e){null!=t&&(this.currentPage=t,this.targetPage=e,this.currentBitmapData=this.currentPage.getPageBitmapData(),this.targetBitmapData=this.targetPage.getPageBitmapData())},i.prototype.run=function(){this.webgl&&t.logic.TransitionManager.startRender()},i.prototype.onFinished=function(e){this.dispatchEvent(new createjs.Event(t.logic.TransitionManager.TRANSITION_FINISHED))},i.prototype.destory=function(){for(;this.transitionContainer.numChildren>0;)this.transitionContainer.removeChildAt(0),t.Main.spriteStage.update();this.transitionContainer.x=this.transitionContainer.y=0,this.currentBitmapData&&this.currentBitmapData.dispose(),this.targetBitmapData&&this.targetBitmapData.dispose(),this.option=null},i}(createjs.EventDispatcher);e.AbstractEffect=i}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return __extends(e,t),e.prototype.destory=function(){},e.prototype.disable=function(){},e.prototype.enable=function(){},e}(createjs.EventDispatcher);t.AbstractTrigger=e}(e=t.trigger||(t.trigger={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e;!function(t){t[t.page_prev=0]="page_prev",t[t.page_next=1]="page_next",t[t.swipe_down=2]="swipe_down",t[t.swipe_up=3]="swipe_up",t[t.swipe_left=4]="swipe_left",t[t.swipe_right=5]="swipe_right",t[t.swipe_vertical=6]="swipe_vertical",t[t.swipe_horzontl=7]="swipe_horzontl",t[t.shake=8]="shake",t[t.tap=9]="tap"}(e=t.TriggerKey||(t.TriggerKey={}))}(e=t.trigger||(t.trigger={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.init=function(t){void 0===t&&(t=null),this.container=this.initLib(),this.container.stop(),this.container.gotoAndStop("_introStart"),this.name="mc",this.addChild(this.container),t&&(this.container.on(i.mcIntroStart,t.onIntroStart,t),this.container.on(i.mcIntroFinished,t.onIntroFinished,t),this.container.on(i.mcOutroStart,t.onOutroStart,t),this.container.on(i.mcOutroFinished,t.onOutroFinished,t))},i.prototype.initLib=function(){},i.prototype.gotoAndPlay=function(t){this.container.gotoAndPlay(t)},i.prototype.gotoAndStop=function(t){this.container.gotoAndStop(t)},i.prototype.play=function(){this.container.play()},i.prototype.stop=function(){this.container.stop()},i.prototype.stopAll=function(){this.stop(),this.stopAllSound();for(var t=this.container.numChildren,e=0;e<t;e++){var i=this.container.getChildAt(e);i instanceof createjs.MovieClip&&i.stop()}},i.prototype.playSound=function(e,i){void 0===i&&(i=!1),console.log("playSound",e,i),this.soundArr||(this.soundArr=[]),this.soundArr.push(t.logic.SoundManager.playMcSound(e,i))},i.prototype.stopSound=function(t){this.soundArr&&t.stop()},i.prototype.stopAllSound=function(){this.soundArr&&(this.soundArr.forEach(function(t){this.stopSound(t)},this),this.soundArr=null)},i.prototype.mouseover=function(t){t.target.alpha=.3,console.log("mouseover",t.target)},i.prototype.mouseout=function(t){t.target.alpha=1,console.log("mouseout",t.target)},i.prototype.getEle=function(t){null==this.eleArr&&(this.eleArr=[]);for(var e=t.numChildren,i=0;i<e;i++){var n=t.getChildAt(i);n instanceof createjs.DisplayObject&&(n.on("mouseover",this.mouseover),n.on("mouseout",this.mouseout))}},i.prototype.fl_ClickToGoToWebPage=function(){window.open("http://www.moneplus.cn","_blank")},i}(createjs.Container);i.mcIntroStart="mcIntroStart",i.mcIntroFinished="mcIntroFinished",i.mcOutroStart="mcOutroStart",i.mcOutroFinished="mcOutroFinished",e.MovieClipView=i}(i=e.component||(e.component={}))}(e=t.ui||(t.ui={}))}(mcjs||(mcjs={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this)||this;return i._useMultiPoints=!1,i._stats=-1,i._location=new createjs.Point,i._target=t,null!=i._target&&i.addHostToManager(),i}return __extends(i,e),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&(this._stats=-1,null!=this._target&&this.removeHostFromManager(),this._target=t,null!=this._target&&this.addHostToManager())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"location",{get:function(){return this._location.clone()},enumerable:!0,configurable:!0}),i.prototype.addHostToManager=function(){t.GestureManager.addHost(this)},i.prototype.removeHostFromManager=function(){t.GestureManager.removeHost(this)},i.prototype.onTouch=function(t){},i.prototype.gestureBegan=function(){this._stats=1;var e=new t.GestureEvent(t.GestureEvent.BEGAN);e.host=this._target,this.dispatchEvent(e)},i.prototype.gestureUpdate=function(){this._stats=2;var e=new t.GestureEvent(t.GestureEvent.UPDATE);e.host=this._target,this.dispatchEvent(e)},i.prototype.gestureEnded=function(){this._stats=3;var e=new t.GestureEvent(t.GestureEvent.ENDED);e.host=this._target,this.dispatchEvent(e),this._stats=-1},i.prototype.gestureFailed=function(){var e=new t.GestureEvent(t.GestureEvent.FAILED);e.host=this._target,this.dispatchEvent(e),this._stats=-1},i.prototype.subtract=function(t,e){var i=new createjs.Point;return i.x=t.x-e.x,i.y=t.y-e.y,i},i.prototype.getPointLength=function(t){var e=0,i=new createjs.Point(0,0);return e=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},i.prototype.dispose=function(){this._stats=-1,t.GestureManager.removeHost(this),this._target=null},i}(createjs.EventDispatcher);t.AbstractGesture=e}(neoges||(neoges={}));var mcjs;!function(t){var e=function(t){function e(e,i,n){var a=t.call(this,e,i,n)||this;return a.data={},a}return __extends(e,t),e}(createjs.Event);t.Event=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.init=function(){this.transform={},this.defaultPageName="",this.swipeTimer=300},e.setDefaultPageName=function(t){this.defaultPageName=void 0==t?"page1":t},e.getDefaultPageName=function(){return void 0==this.defaultPageName?"page1":this.defaultPageName},e}(t.event.StaticEventDispatcher);e.ExchangeData=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.init=function(){this.allRes={},this.imgs={},this.ss={},this.sounds={},this.jsons={},this.slientLoadRes=[],this.preLoaderRes=[],this.loadNum=0,this.cjs=createjs,this.isLoadPage=!1;var t={id:"mainConfig",src:this.defaultPath+"?"+(new Date).getTime(),type:"json"};this.configLoader=new createjs.LoadQueue,this.configLoader.on("fileload",this.initConfig,this),this.configLoader.loadFile(t,!0)},i.onJsonCompelte=function(t){console.log("onFileLoaded",t.rawResult,t.item.id,t.item.type,t.result)},i.getH5GroupName=function(t){return t+"_#!h5site!#"},i._getSlientGroupName=function(t){return t+"_#!h5site!#_#!slient!#"},i.isPageLoaded=function(t){for(var e in this.allRes)for(var i in this.allRes[e])if(t==i)return!0;return!1},i.getRES=function(t){for(var e in this.allRes)for(var i in this.allRes[e])if(t==i)return this.allRes[e][i]},i.initConfig=function(t){this.defaultJson=t.result,this.configLoader.off("fileload",this.initConfig,this),this.configLoader.close(),this.configLoader.destroy(),this.initLoader=new createjs.LoadQueue,this.initLoader.setMaxConnections(99),this.initLoader.maintainScriptOrder=!0,this.initLoader.on("complete",this.initLoadComplete,this),this.initLoader.on("fileload",this.onFileLoaded,this),this.initLoader.loadManifest(this.defaultJson.init.data,!0,this.defaultJson.init.path)},i.initLoadComplete=function(t){this.initLoader.off("complete",this.initConfig,this),this.dispatchEvent(new createjs.Event(this.INIT_COMPLETE))},i.startPreload=function(){var t=this;this.defaultJson.common.data.forEach(function(e,i){"true"==e.preload?t.preLoaderRes.push(e):t.slientLoadRes.push(e)}),this.defaultJson.page.data.forEach(function(e,i){"true"==e.preload?t.preLoaderRes.push(e):t.slientLoadRes.push(e)}),this.preLoader=new createjs.LoadQueue,this.preLoader.installPlugin(createjs.Sound),this.preLoader.on("fileload",this.onFileLoaded,this),this.preLoader.on("fileprogress",this.onFileProgress,this),this.preLoader.on("complete",this.onPreLoaderComplete,this),this.slientLoader=new createjs.LoadQueue,this.slientLoader.installPlugin(createjs.Sound),this.slientLoader.on("fileload",this.onFileLoaded,this),this.slientLoader.on("complete",this.onSlientLoaderComplete,this),this.slientLoader.on("fileprogress",this.onSlientLoaderProgress,this),this.preLoaderRes.length>0&&this.preLoader.loadManifest(this.preLoaderRes,!0,this.defaultJson.page.path),this.slientLoadRes.length>0&&this.slientLoader.loadManifest(this.slientLoadRes,!1,this.defaultJson.page.path)},i.onPreLoaderComplete=function(t){this.preLoader.off("complete",this.onPreLoaderComplete,this),this.dispatchEvent(new createjs.Event(this.PRELOAD_COMPLETE))},i.onSlientLoaderProgress=function(t){if(t.item.id==this.loadPageName&&this.isLoadPage){var e=t.clone();e.type=this.PAGE_PROGRESS,this.dispatchEvent(e)}},i.onSlientLoaderComplete=function(t){},i.onFileProgress=function(t){var e=(this.loadNum+t.progress)/this.preLoaderRes.length;1==t.progress&&this.loadNum++;var i=t.clone();i.type=this.preLoader.loaded?this.PAGE_PROGRESS:this.LOAD_PROGRESS,i.percent=e,this.dispatchEvent(i)},i.onFileLoaded=function(e){switch(e.item.type){case"image":this.allRes.image||(this.allRes.image={}),this.imgs[e.item.id]=this.allRes.image[e.item.id]=e.result;break;case"json":this.allRes.json||(this.allRes.json={}),this.jsons[e.item.id]=this.allRes.json[e.item.id]=e.result;break;case"spritesheet":this.allRes.ss||(this.allRes.ss={}),this.ss[e.item.id]=this.allRes.ss[e.item.id]=e.result;break;case"sound":this.allRes.sound||(this.allRes.sound={}),this.sounds[e.item.id]=this.allRes.sound[e.item.id]=e.result;break;case"svg":this.allRes.svg||(this.allRes.svg={}),this.allRes.svg[e.item.id]=e.result;break;case"binary":this.allRes.binary||(this.allRes.binary={}),this.allRes.binary[e.item.id]=e.result;break;case"manifest":if(this.allRes.manifest||(this.allRes.manifest={}),this.allRes.manifest[e.item.id]=e.result,this.isLoadPage&&e.item.id==this.loadPageName){this.isLoadPage=!1;var i=new t.Event(t.RES.PAGE_COMPLETE);i.data.pageName=t.RES.getH5GroupName(this.loadPageName),this.dispatchEvent(i)}}},i.onPageLoaded=function(t){t.target.destroy()},i.loadPage=function(t){this.stopSlientLoad(),this.loadPageName=t,this.isLoadPage=!0;var e=new createjs.LoadQueue;e.on("fileload",this.onFileLoaded,this),e.on("fileprogress",this.onFileProgress,this),e.on("complete",this.onPageLoaded,this);var i=[];this.slientLoadRes.forEach(function(e,n){if(e.id==t)return void i.push(e)}),i.length>0?e.loadManifest(i,!0,this.defaultJson.page.path):console.error(t+"resource not found!")},i.loadPageEdit=function(t){this.stopSlientLoad(),this.loadPageName=t.id,this.isLoadPage=!0;var e=new createjs.LoadQueue;e.on("fileload",this.onFileLoaded,this),e.on("fileprogress",this.onFileProgress,this),e.on("complete",this.onPageLoaded,this),e.loadManifest(t,!0)},i.onFileStart=function(t){},i.onLoadStart=function(t){},i.onError=function(t){console.log("onError",t.data,t.message,t.title)},i.stopSlientLoad=function(){this.slientLoader.setPaused(!0)},i.startSlientLoad=function(){this.slientLoader.loaded||this.slientLoader.setPaused(!1)},i}(t.event.StaticEventDispatcher);e.PRELOAD_COMPLETE="preload_complete",e.INIT_COMPLETE="init_complete",e.LOAD_PROGRESS="load_progress",e.PAGE_COMPLETE="page_complete",e.PAGE_PROGRESS="page_progress",e.cjs=createjs,t.RES=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.init=function(i){console.log("ViewManager init!"),this.totalLayerNum=10,this.closeViewNum=0,this.hasIntro=!1,this.pageSwitchSynchro={},this.root=i,this.viewList=[],this.closeViewList=[],this.recordViewList=[],this.intro=!1,t.RES.defaultJson.page.data.forEach(function(t,i){t.id==e.ExchangeData.getDefaultPageName().toLowerCase()&&(t.preload="true")}),this.initLayer()},n.getNextPageName=function(){var t=this.viewOrderList.indexOf(this.currentOrderPageName)+1;return t<this.viewOrderList.length?this.viewOrderList[t]:null},n.getPrevPageName=function(){var t=this.viewOrderList.indexOf(this.currentOrderPageName)-1;return t>=0?this.viewOrderList[t]:null},n.start=function(){this.initStageLaytout()},n.initStageLaytout=function(){this.stageLayout=new t.ui.StageLayout,this.stageLayout.init(),this.stageLayout.on(t.ui.PageView.INTRO_FINISHED,this.onStageLayoutComplete,this),this.getLayer("stageLayout").addChild(this.stageLayout),this.stageLayout.startPage()},n.onStageLayoutComplete=function(e){this.stageLayout.off(t.ui.PageView.INTRO_FINISHED,this.onStageLayoutComplete,this),this.pageContainer=this.stageLayout.pageContainer,this.transitionContainer=this.stageLayout.transitionContainer,t.Edit.isEnabled||(t.logic.TriggerManager.init(this.pageContainer),t.logic.TriggerManager.on(t.event.TriggerEvent.INPUT,this.onTriggerInput,this)),t.logic.TransitionManager.init(this.pageContainer),t.logic.TransitionManager.on(t.logic.TransitionManager.TRANSITION_FINISHED,this.onTransitionPageContentComplete,this),this.hasIntro||(this.stageLayout.buildUI(),t.Edit.isEnabled||this.openDefaultPage()),this.dispatchEvent(new createjs.Event(this.VIEW_INIT))},n.initLayer=function(){for(var t=0;t<this.totalLayerNum+1;t++){var e=new createjs.Container;this.root.addChild(e)}},n.initLoadingUI=function(){this.contentLoadingView=new t.ContentLoadingUI,this.getLayer("contentLoaderIcon").addChild(this.contentLoadingView),this.indexLoadingView=new t.IndexLoadingUI,this.getLayer("indexLoaderIcon").addChild(this.indexLoadingView)},n.showIndexLoader=function(){null==this.indexLoadingView&&this.initLoadingUI(),this.indexLoadingView.show()},n.hideIndexLoader=function(){this.indexLoadingView.hide(),this.indexLoadingView.setProgress(0)},n.showContentLoader=function(){null==this.contentLoadingView&&this.initLoadingUI(),this.contentLoadingView.show()},n.hideContentLoader=function(){this.contentLoadingView.hide(),this.contentLoadingView.setProgress(0)},n.getLayer=function(t){switch(t){case"topLevel":return this.root.getChildAt(this.totalLayerNum-1);case"floatLayer":return this.root.getChildAt(8);case"indexLoaderIcon":return this.root.getChildAt(5);case"contentLoaderIcon":return this.root.getChildAt(4);case"stageLayout":return this.root.getChildAt(2);case"bg":return this.root.getChildAt(1)}return null},n.openDefaultPage=function(){this.addView(e.ExchangeData.getDefaultPageName()),this.initOrderView(e.ExchangeData.getDefaultPageName())},n.addViewByEdit=function(e,i,n,a,s){if(void 0===i&&(i=!1),void 0===n&&(n=null),void 0===a&&(a=-1),void 0===s&&(s=0),this.isTransitioning)return void console.error("Operation is not allowed, current state: transitioning");var r=e.id;if(!this.currentPage||r!=this.currentPage.pageName){if(!i)for(var o=0;o<this.viewList.length;o++)this.removeView(this.viewList[o].pageName);this.targetViewData=new t.ui.ViewData,this.targetViewData.pageName=r,this.targetViewData.isTran=i,this.targetViewData.loaderIconId=s,this.targetViewData.closeCurViewLevel=a;for(var h in n)this.targetViewData.userData[h]=n[h];if(t.RES.isPageLoaded(r)){var c=new t.Event(t.RES.PAGE_COMPLETE);c.data.pageName=t.RES.getH5GroupName(r),this.onPageContentLoadComplete(c)}else t.RES.on(t.RES.PAGE_COMPLETE,this.onPageContentLoadComplete,this),t.RES.on(t.RES.PAGE_PROGRESS,this.onPageContentLoadProgress,this),this.showContentLoader(),t.RES.loadPageEdit(e)}},n.addView=function(e,i,n,a,s){if(void 0===i&&(i=null),void 0===n&&(n=1),void 0===a&&(a=0),void 0===s&&(s=!1),this.isTransitioning)return void console.error("Operation is not allowed, current state: transitioning");if(!this.currentPage||e!=this.currentPage.pageName){this.targetViewData=new t.ui.ViewData,this.targetViewData.pageName=e,this.targetViewData.isTran=s,this.targetViewData.loaderIconId=a,this.targetViewData.closeCurViewLevel=n;for(var r in i)this.targetViewData.userData[r]=i[r];if(t.RES.isPageLoaded(e)){var o=new t.Event(t.RES.PAGE_COMPLETE);o.data.pageName=t.RES.getH5GroupName(e),this.onPageContentLoadComplete(o)}else t.RES.on(t.RES.PAGE_COMPLETE,this.onPageContentLoadComplete,this),t.RES.on(t.RES.PAGE_PROGRESS,this.onPageContentLoadProgress,this),this.showContentLoader(),t.RES.loadPage(e)}},n.transitionView=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=0),this.addView(t,e,-1,i,!0)},n.addViewByViewData=function(e){this.lockStage(),this.currentOrderPageName=e.pageName,this.nextPageName=e.pageName;var i=t.RES.getRES(e.pageName.toLowerCase());e.pageName=i.name,e.setTranData(i.transition),e.openStyle=this.targetViewData.isTran?-9999:i.openStyle,this.viewList.push(e),this.recordViewList.push(e),this.onActiveViewChange(),this.targetViewData=this.viewList[this.viewList.length-1],this.closeViewNum=this.targetViewData.closeCurViewLevel;var n=t.custom[e.pageName];"undefined"!=typeof n&&n instanceof Function&&(this.clearSpriteStage(),this.targetViewData.pageView=new n,this.targetViewData.pageView.on(t.ui.PageView.INTRO_START,this.onPageTemplateIntroStart,this),this.targetViewData.pageView.on(t.ui.PageView.INTRO_FINISHED,this.onPageTemplateIntroFinished,this),this.targetViewData.pageView.on(t.ui.PageView.PAGE_INIT,this.onPageTemplateInit,this),this.targetViewData.pageView.pageName=this.targetViewData.pageName,this.targetViewData.pageView.viewData=this.targetViewData,this.targetViewData.pageView.init())},n.addViewToContainer=function(t){this.currentPage=this.transferViewPage=t,this.pageContainer.addChild(this.transferViewPage),this.transferViewPage.startPage()},n.closeCurView=function(){this.closeViewNum<0&&(this.closeViewNum=this.viewList.length-1);var t=this.viewList.length-this.closeViewNum-1;t<0&&(t=0),this.closeViewNum<0&&(this.closeViewNum=0),this.closeViewList=[];for(var e=t;e<this.viewList.length-1;e++)this.closeViewList.push(this.viewList[e]),this.closeView(this.viewList[e])},n.closeView=function(e){e.pageView.on(t.ui.PageView.OUTRO_FINISHED,this.onPageTemplateOutroFinished,this),"true"==this.targetViewData.forceTran?e.pageView.onOutroFinished():(e.pageView.on(t.ui.PageView.OUTRO_START,this.onPageTemplateOutroStart,this),e.pageView.closePage())},n.removeView=function(e){for(var i,n=0;n<this.viewList.length;n++){var a=this.viewList[n];if(a.pageName==e){var s=this.pageContainer;s.removeChild(a.pageView),a.pageView.off(t.ui.PageView.INTRO_START,this.onPageTemplateIntroStart,this),a.pageView.off(t.ui.PageView.INTRO_FINISHED,this.onPageTemplateIntroFinished,this),a.pageView.off(t.ui.PageView.OUTRO_START,this.onPageTemplateOutroStart,this),a.pageView.off(t.ui.PageView.OUTRO_FINISHED,this.onPageTemplateOutroFinished,this),a.clear(),i=n;break}}this.viewList.splice(i,1),this.onActiveViewChange()},n.removeViewList=function(){for(var t=0;t<this.closeViewList.length;t++)this.removeView(this.closeViewList[t].pageName)},n.getViewData=function(t){for(var e,i=0;i<this.viewList.length;i++)if(this.viewList[i].pageName==t){e=this.viewList[i];break}return e},n.onPageContentLoadComplete=function(e){e.data.pageName==t.RES.getH5GroupName(this.targetViewData.pageName)&&(this.hideContentLoader(),t.RES.off(t.RES.PAGE_COMPLETE,this.onPageContentLoadComplete,this),t.RES.off(t.RES.PAGE_PROGRESS,this.onPageContentLoadProgress,this),this.addViewByViewData(this.targetViewData))},n.onPageTemplateInit=function(e){var i=e.target;i.off(t.ui.PageView.PAGE_INIT,this.onPageTemplateInit,this),1==this.viewList.length?this.addViewToContainer(this.targetViewData.pageView):this.switchPageViewTemplate()},n.switchPageViewTemplate=function(){if(this.targetViewData.isTran)this.closeCurView();else if(0==this.targetViewData.closeCurViewLevel)this.addViewToContainer(this.targetViewData.pageView);else switch(this.pageSwitchSynchro=null,Number(this.targetViewData.openStyle)){case t.ui.ViewData.TargetViewIntroStart_Wait_CurViewOutroStart:this.closeCurView();break;case t.ui.ViewData.CurViewOutroStart_Wait_TargetViewIntroStart:this.addViewToContainer(this.targetViewData.pageView);break;case t.ui.ViewData.TargetViewIntroStart_And_CurViewOutroStart:this.closeCurView(),this.addViewToContainer(this.targetViewData.pageView);break;case t.ui.ViewData.TargetViewIntroFinsided_Wait_CurViewOutroFinished:break;case t.ui.ViewData.CurViewStop_And_TargetViewIntroStart:}},n.onPageTemplateIntroStart=function(e){var i=e.target;i.off(t.ui.PageView.INTRO_START,this.onPageTemplateIntroStart,this),"true"==i.viewData.forceTran&&this.ignoreLock()},n.onPageTemplateIntroFinished=function(e){var i=e.target;i.off(t.ui.PageView.INTRO_FINISHED,this.onPageTemplateIntroFinished,e.target),this.unlockStage(),this.targetViewData.openStyle==t.ui.ViewData.CurViewOutroStart_Wait_TargetViewIntroStart&&this.closeCurView(),this.getViewData(i.pageName).openStyle=t.ui.ViewData.TargetView_Is_Open},n.onPageTemplateOutroStart=function(e){var i=e.target;i.off(t.ui.PageView.OUTRO_START,this.onPageTemplateOutroStart,this)},n.onPageTemplateOutroFinished=function(e){console.log("onPageTemplateOutroFinished");var i=e.target;i.cache(),i.off(t.ui.PageView.OUTRO_START,this.onPageTemplateOutroFinished,this),this.targetViewData.isTran||this.removeView(i.pageName),this.closeViewNum--,0==this.closeViewNum&&this.targetViewData.isTran?this.readyForTransition(this.targetViewData.pageView):0==this.closeViewNum&&this.targetViewData.openStyle==t.ui.ViewData.TargetViewIntroStart_Wait_CurViewOutroStart&&this.addViewToContainer(this.targetViewData.pageView)},n.onPageContentLoadProgress=function(t){this.contentLoadingView.setProgress(t.progress)},n.onActiveViewChange=function(){},n.lockStage=function(){this.root.mouseEnabled=!1,console.log("lockStage")},n.unlockStage=function(){this.root.mouseEnabled=!0,console.log("unlockStage")},n.ignoreLock=function(){console.log("ignoreLock"),this._ignoreLock=!0,this.unlockStage()},n.clearSpriteStage=function(){for(;t.logic.LayoutManager.spriteStage.numChildren>0;)t.logic.LayoutManager.spriteStage.removeChildAt(0),t.logic.LayoutManager.spriteStage.update()},n.onTransitionPageContentComplete=function(e){this.currentPage.off(t.ui.PageView.INTRO_START,this.onPageTemplateIntroStart,this),this.currentPage.off(t.ui.PageView.INTRO_FINISHED,this.onPageTemplateIntroFinished,this),this.currentPage.off(t.ui.PageView.OUTRO_START,this.onPageTemplateOutroStart,this),this.currentPage.off(t.ui.PageView.OUTRO_FINISHED,this.onPageTemplateOutroFinished,this),this.currentPage.onOutroFinished(),this.removeView(this.currentPage.pageName),this.targetViewData.pageView.uncache(),this.addViewToContainer(this.targetViewData.pageView),this.isTransitioning=!1,t.Edit.isPreview&&setTimeout(t.Edit.backLast,500)},n.onTriggerInput=function(t){if(this.isTransitioning)return void console.error("Operation is not allowed, current state: transitioning");switch(this.currentPage.viewData.checkTrigger(t.trigger)){case"next":this.transitionNextView(t.userData);break;case"prev":this.transitionPrevView(t.userData);break;default:console.log("onTriggerInput not Right!")}},n.readyForTransition=function(i){this.isTransitioning=!0,t.Edit.isEnabled&&this.currentPage.viewData.setTranData(t.Edit.getTransition());var n="next"==this.transitionViewDirection?this.currentPage.viewData.nextData:this.currentPage.viewData.prevData;e.TransitionManager.start(this.currentPage,this.targetViewData.pageView,n.effect)},n.initOrderView=function(e){var i=t.RES.defaultJson.page.data;this.viewOrderList=[];for(var n=0;n<i.length;n++)this.viewOrderList.push(i[n].id);this.currentOrderPageName=e},n.transitionNextView=function(t){void 0===t&&(t=null);var e=this.viewOrderList.indexOf(this.currentOrderPageName)+1;return e<this.viewOrderList.length?(this.currentOrderPageName=this.viewOrderList[e],this.transitionViewDirection="next",this.transitionView(this.currentOrderPageName,t),!0):(this.currentPage.viewData.triggerResult=null,console.log("This is last Page!!!"),!1)},n.transitionPrevView=function(t){void 0===t&&(t=null);var e=this.viewOrderList.indexOf(this.currentOrderPageName)-1;return e>=0?(this.currentOrderPageName=this.viewOrderList[e],this.transitionViewDirection="prev",this.transitionView(this.currentOrderPageName,t),!0):(this.currentPage.viewData.triggerResult=null,console.log("This is first Page!!!"),!1)},n}(t.event.StaticEventDispatcher);i.VIEW_INIT="View_Init",i._ignoreLock=!1,e.ViewManager=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e=function(){function t(){}return t.openExternalLink=function(t,e){var i={title:"",url:""};history.replaceState(i,"",e),window.open(t)},t.getRandomColor=function(){for(var t="abcdef1234567890",e="#",i=0;i<6;i++)e+=t.charAt(Math.round((t.length-1)*Math.random()));return e},t.getRandomStr=function(t){void 0===t&&(t=10);for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i="",n=0;n<t;n++)i+=e.charAt(Math.round((e.length-1)*Math.random()));return i},t.getRandomStrByvarter=function(t){void 0===t&&(t=10);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="",n=0;n<t;n++)i+=e.charAt(Math.round((e.length-1)*Math.random()));return i},t.isEmail=function(t){return Boolean(t.match(this.EMAIL_REGEX))},t.isMobilePhone=function(t){return Boolean(t.match(this.PHONE_REGEX))},t.getTimerSytle=function(t){for(var e=Math.floor(t),i=Math.floor(100*t-100*e)+"",n=e%60+"",a=Math.floor(e/60)%60+"",s=Math.floor(e/3600)%60+"",r=Math.floor(e/86400)%24+"",o=new Array(i,n,a,s,r),h=0;h<o.length;h++){var c=o[h];c.length<2&&(o[h]="0"+c)}return o},t.getRTimer=function(t){var e=Math.floor(t/864e5),i=Math.floor(t/36e5)%24,n=Math.floor(t/6e4)%60,a=Math.floor(t/1e3)%60,s=Math.floor(t/10)%100;return e>=0&&(e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),a<10&&(a="0"+a),s<10&&(s="0"+s)),a+":"+s},t.getRTimerArr=function(t){var e=Math.floor(t/864e5),i=Math.floor(t/36e5)%24,n=Math.floor(t/6e4)%60,a=Math.floor(t/1e3)%60,s=Math.floor(t/10)%100;return[s,a,n,i,e]},t.isInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},t.isInWeibo=function(){return/Weibo/i.test(navigator.userAgent)},t.getSystemOS=function(){return/android/i.test(navigator.userAgent)?"an":/ipad|iphone/i.test(navigator.userAgent)?"ios":/mac/i.test(navigator.userAgent)?"mac":/window|mac|linux/i.test(navigator.userAgent)?"desktop":navigator.userAgent.match(/.*Mobile.*/)?"mobile":void 0},t.isMobieDevice=function(){return"mobile"==this.getDeviceType()},t.getDeviceType=function(){return navigator.userAgent.match(/.*Mobile.*/)?"mobile":/window|mac/i.test(navigator.userAgent)?"desktop":null},t.getAndroidVersion=function(){var t=navigator.userAgent;return t.substr(t.indexOf("Android")+8,5)},t.getRequestParams=function(t){var e=location.search,i=new Object;if(e.indexOf("?")!=-1)for(var n=e.substr(1),a=n.split("&"),s=0;s<a.length;s++)i[a[s].split("=")[0]]=decodeURI(a[s].split("=")[1]);return i[t]},t.disableWxBack=function(){if(""==this.hash){this.hash=window.location.hash;for(var t=0;t<10;t++)window.location.hash="index"+t;window.location.hash=this.hash,""==this.hash&&(this.hash="-1")}},t}();e.SCALE_NO_SCALE="Scale_No_Scale",e.SCALE_EXACT_FIT="Scale_Exact_Fit",e.SCALE_AUTO_FIT_INSIDE="Scale_Auto_Fit_Inside",e.SCALE_AUTO_FIT_OUTSIDE="Scale_Auto_Fit_Outside",e.EMAIL_REGEX=/^[A-Z0-9._%+-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$/i,e.PHONE_REGEX=/^([0-9]{11})?$/,e.hash="",t.Tools=e}(mcjs||(mcjs={}));var neoges;!function(t){var e=function(t){function e(e,i,n){
return t.call(this,e,i,n)||this}return __extends(e,t),e}(createjs.Event);e.BEGAN="began",e.UPDATE="update",e.ENDED="ended",e.FAILED="failed",t.GestureEvent=e}(neoges||(neoges={}));var mcjs;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.run=function(e){void 0===e&&(e=!1),this.div=document.getElementById("mcjs"),this.div.style.overflow="hidden",this.div.style.position="relative",this.webgl_canvas=document.createElement("canvas"),this.webgl_canvas.id="createjs_webgl",this.div.appendChild(this.webgl_canvas),this.canvas=document.createElement("canvas"),this.canvas.id="createjs_2d",this.div.appendChild(this.canvas),this.stage=new createjs.Stage(this.canvas),this.stage.enableMouseOver(5),this.spriteStage=new createjs.SpriteStage("createjs_webgl",!1,!1),createjs.Touch.enable(this.stage),createjs.Ticker.framerate=24,createjs.Ticker.addEventListener("tick",this.stage),trace.init(this.stage),console.log(this.copyright()),t.Edit.init(e),t.logic.ExchangeData.init(),t.logic.SoundManager.init(),t.logic.LayoutManager.init(),t.logic.LayoutManager.setScaleMode(this.div.dataset.scaleMode),t.RES.on(t.RES.INIT_COMPLETE,this.onInitLoadCompelte,this),t.RES.on(t.RES.LOAD_PROGRESS,this.onInitLoadProgress,this),t.RES.on(t.RES.PRELOAD_COMPLETE,this.onPreLoadCompelte,this),t.RES.init()},i.ver=function(){var t="2.021";return"ver: "+t},i.copyright=function(){return"Develop by simon.jie@moneplus.cn Beijing 2017.1 copyright 北京动壹科技有限公司 http://www.moneplus.cn "+this.ver()},i.onInitLoadCompelte=function(e){t.RES.off(t.RES.INIT_COMPLETE,this.onInitLoadCompelte,this),t.Edit.isEnabled||t.logic.ExchangeData.setDefaultPageName(t.Tools.getRequestParams("pageName")||t.RES.defaultJson.page.data[0].id);var i=new createjs.Container;this.stage.addChildAt(i,0),t.logic.ViewManager.init(i),t.logic.ViewManager.showIndexLoader(),t.RES.startPreload()},i.onInitLoadProgress=function(e){t.logic.ViewManager.indexLoadingView.setProgress(e.percent)},i.onPreLoadCompelte=function(e){t.RES.off(t.RES.PRELOAD_COMPLETE,this.onPreLoadCompelte,this),t.logic.ViewManager.hideIndexLoader(),this.initScene()},i.initScene=function(){t.logic.ExchangeData.transform=t.RES.getRES("page.transform"),t.logic.ViewManager.start()},i}(t.event.StaticEventDispatcher);t.Main=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e=function(t){function e(e,i,n,a,s,r,o,h,c,u){return t.call(this,e,i,n,a,s,r,o,h,c,u)||this}return __extends(e,t),e}(createjs.MouseEvent);e.Tap="click",t.MouseEvent=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return __extends(e,t),e}(createjs.Event);e.INPUT="Input",t.TriggerEvent=e}(e=t.event||(t.event={}))}(mcjs||(mcjs={}));var neoges;!function(t){var e=function(){function t(){this._collection=[]}return t.prototype.clone=function(t){var e=this._collection.pop();null==e&&(e=new createjs.MouseEvent(t.type,t.bubbles,t.cancelable,t.stageX,t.stageY,null,t.pointerID));for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]),e.$stageX=t.stageX,e.$stageY=t.stageY;return e},t.prototype.setProperties=function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]),e.$stageX=t.stageX,e.$stageY=t.stageY;return e},t.prototype.reclaim=function(t){this._collection.indexOf(t)==-1&&this._collection.push(t)},t.prototype.reclaimAll=function(t){for(;t.length>0;)this.reclaim(t[0]),t.shift()},t}();t.EventPool=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i.isBegan=!1,i._useMultiPoints=!1,i}return __extends(i,e),i.prototype.onTouch=function(e){if(!(e.length>2)){var i=e[0];if("mousedown"==i.type){this.isBegan=!0,this.gestureBegan(),this._startPoint=new createjs.Point(i.stageX,i.stageY),clearTimeout(this.callID);var n=this;this.callID=setTimeout(function(){n.checkSwipeHandler()},1e3)}else"pressup"==i.type&&this.isBegan&&(this._endPoint=new createjs.Point(i.stageX,i.stageY),this.disX=Math.abs(this._endPoint.x-this._startPoint.x),this.disY=Math.abs(this._endPoint.y-this._startPoint.y),(this.disX>t.SwipeGesture.SWIPE_DISTANCE||this.disY>t.SwipeGesture.SWIPE_DISTANCE)&&1==this._stats?this.gestureEnded():this.gestureFailed())}},i.prototype.gestureEnded=function(){this._stats=3;var e=new t.GestureEvent(t.GestureEvent.ENDED),i=0,n=0;this.disX>t.SwipeGesture.SWIPE_DISTANCE&&(i=this._endPoint.x>this._startPoint.x?1:-1),this.disY>t.SwipeGesture.SWIPE_DISTANCE&&(n=this._endPoint.y>this._startPoint.y?1:-1),e.offsetX=i,e.offsetY=n,e.host=this.target,e.value=Math.sqrt(this.disX+this.disY),this.dispatchEvent(e),this._stats=-1},i.prototype.checkSwipeHandler=function(){this.isBegan=!1,this.gestureFailed()},i}(t.AbstractGesture);e.SWIPE_DISTANCE=25,t.SwipeGesture=e}(neoges||(neoges={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.init=function(){console.log("LayoutManager init!"),this.canvas=t.Main.canvas,this.webgl_canvas=t.Main.webgl_canvas,this.div=t.Main.div,this.stage=t.Main.stage,this.spriteStage=t.Main.spriteStage,this.isWebGL=this.spriteStage.isWebGL,document.body.addEventListener("touchmove",function(t){t.preventDefault()},!1),this.SCALE_MODE={showAll:"showAll",noScale:"noScale",noBorder:"noBorder",exactFit:"exactFit",fixedWidth:"fixedWidth",fixedHeight:"fixedHeight"},this.designWidth=this.div.dataset.contentWidth,this.designHeight=this.div.dataset.contentHeight,this.domWidth=$(window).width(),this.domHeight=$(window).height(),this.designRate=this.designWidth/this.designHeight,this.domRate=this.domWidth/this.domHeight,this.stageWidth=-1,this.stageHeight=-1,this.scaleRateW=-1,this.scaleRateH=-1,this.scaleRate=-1,this.canvas.style.cursor="default",this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.bottom="0px",this.canvas.style.left="0px",this.canvas.style.right="0px",this.webgl_canvas.style.cursor="default",this.webgl_canvas.style.position="absolute",this.webgl_canvas.style.top="0px",this.webgl_canvas.style.bottom="0px",this.webgl_canvas.style.left="0px",this.webgl_canvas.style.right="0px"},i.setScaleMode=function(t){switch(this.canvas.width=this.designWidth,this.canvas.height=this.designHeight,this.canvas.style.width=this.domWidth+"px",this.canvas.style.height=this.domHeight+"px",t){case this.SCALE_MODE.exactFit:this.canvas.width=this.designWidth,this.canvas.height=this.designHeight,this.canvas.style.width=this.domWidth+"px",this.canvas.style.height=this.domHeight+"px";break;case this.SCALE_MODE.fixedHeight:var e=this.designHeight*this.domRate;this.canvas.width=e;break;case this.SCALE_MODE.fixedWidth:var i=this.designWidth/this.domRate;this.canvas.height=i;break;case this.SCALE_MODE.noBorder:this.designRate<=this.domRate?(this.canvas.style.width=this.domWidth+"px",this.canvas.style.height=this.domWidth*this.designHeight/this.designWidth+"px",this.canvas.style.top=(this.domHeight-this.domWidth*this.designHeight/this.designWidth)/2+"px"):(this.canvas.style.width=this.domHeight*this.designWidth/this.designHeight+"px",this.canvas.style.height=this.domHeight+"px",this.canvas.style.left=(this.domWidth-this.domHeight*this.designWidth/this.designHeight)/2+"px");break;case this.SCALE_MODE.noScale:this.canvas.style.width=this.designWidth+"px",this.canvas.style.height=this.designHeight+"px";break;case this.SCALE_MODE.showAll:this.designRate<=this.domRate?(this.canvas.style.width=this.domHeight*this.designRate+"px",this.canvas.style.height=this.domHeight+"px",this.canvas.style.left=(this.domWidth-this.domHeight*this.designRate)/2+"px"):(this.canvas.style.width=this.domWidth+"px",this.canvas.style.height=this.domWidth/this.designRate+"px",this.canvas.style.top=(this.domHeight-this.domWidth/this.designRate)/2+"px");break;default:this.canvas.style.width=this.domWidth+"px",this.canvas.style.height=this.domHeight+"px"}this.webgl_canvas.width=this.canvas.width,this.webgl_canvas.height=this.canvas.height,this.webgl_canvas.style.width=this.canvas.style.width,this.webgl_canvas.style.height=this.canvas.style.height,this.webgl_canvas.style.left=this.canvas.style.left,this.webgl_canvas.style.right=this.canvas.style.right,this.webgl_canvas.style.top=this.canvas.style.top,this.webgl_canvas.style.bottom=this.canvas.style.bottom,this.spriteStage.updateViewport(this.webgl_canvas.width,this.webgl_canvas.height),this.scaleMode=t,this.stageWidth=this.canvas.width,this.stageHeight=this.canvas.height,this.scaleRateW=this.stageWidth/this.designWidth,this.scaleRateH=this.stageHeight/this.designHeight,this.scaleRateMax=Math.max(this.scaleRateW,this.scaleRateH),this.scaleRate=this.scaleRateMin=Math.min(this.scaleRateW,this.scaleRateH),this.domScaleRateW=this.domWidth/this.designWidth,this.domScaleRateH=this.domHeight/this.designHeight},i}(t.event.StaticEventDispatcher);e.LayoutManager=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e;!function(t){t[t.T_B=0]="T_B",t[t.B_T=1]="B_T",t[t.R_L=2]="R_L",t[t.L_R=3]="L_R",t[t.TL_BR=4]="TL_BR",t[t.TR_BL=5]="TR_BL",t[t.BR_TL=6]="BR_TL",t[t.BL_TR=7]="BL_TR"}(e=t.EffectDirection||(t.EffectDirection={}));var i;!function(t){t[t.push=0]="push",t[t.move_in=1]="move_in",t[t.drop=2]="drop",t[t.clothsline=3]="clothsline",t[t.fade_color=4]="fade_color"}(i=t.EffectType||(t.EffectType={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(i){var n=function(i){function n(t,e){var n=i.call(this,t,e)||this;return n.minDuration=1500,n}return __extends(n,i),n.prototype.run=function(){i.prototype.run.call(this),this.currentBitmap=new createjs.Bitmap(this.currentBitmapData.canvas),this.targetBitmap=new createjs.Bitmap(this.targetBitmapData.canvas),this.transitionContainer.addChild(this.currentBitmap),this.transitionContainer.addChild(this.targetBitmap);var n={},a=t.logic.LayoutManager.stageWidth;t.logic.LayoutManager.stageHeight;switch(this.currentBitmap.regX=this.targetBitmap.regX=.5*a,this.currentBitmap.regY=this.targetBitmap.regY=0,this.currentBitmap.x=.5*a,this.option.direction){case e.EffectDirection.L_R:this.targetBitmap.x=1*-a,this.targetBitmap.y=0,this.currentBitmap.rotation=this.targetBitmap.rotation=-20,n.x=1.5*a;break;default:case e.EffectDirection.R_L:this.targetBitmap.x=2*a,this.targetBitmap.y=0,this.currentBitmap.rotation=this.targetBitmap.rotation=20,n.x=1.5*-a}var s=t.logic.TransitionManager.getDelay();createjs.Tween.get(this.transitionContainer).wait(s).to(n,300,createjs.Ease.sineIn).call(this.rotation,null,this)},n.prototype.rotation=function(){this.option.duration<this.minDuration&&(this.option.duration=this.minDuration),createjs.Tween.get(this.targetBitmap).to({rotation:0},this.option.duration,createjs.Ease.elasticOut).call(this.onFinished,null,this)},n}(i.AbstractEffect);i.ClothslineEffect=n}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.minDuration=1e3,n}return __extends(i,e),i.prototype.run=function(){e.prototype.run.call(this),this.currentBitmap=new createjs.Bitmap(this.currentBitmapData.canvas),this.targetBitmap=new createjs.Bitmap(this.targetBitmapData.canvas),this.transitionContainer.addChild(this.currentBitmap),this.transitionContainer.addChild(this.targetBitmap);var i={},n=(t.logic.LayoutManager.stageWidth,t.logic.LayoutManager.stageHeight);this.targetBitmap.x=0,this.targetBitmap.y=-n,i.y=0,this.option.duration=this.minDuration,console.log("mcjs.logic.TransitionManager.getDelay()",t.logic.TransitionManager.getDelay()),createjs.Tween.get(this.targetBitmap).wait(t.logic.TransitionManager.getDelay()).to(i,this.option.duration,createjs.Ease.bounceOut).call(this.onFinished,null,this)},i}(e.AbstractEffect);e.DropEffect=i}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.minDuration=1500,n}return __extends(i,e),i.prototype.run=function(){e.prototype.run.call(this);var i=t.logic.LayoutManager.stageWidth,n=t.logic.LayoutManager.stageHeight;this.currentBitmap=new createjs.Bitmap(this.currentBitmapData.canvas),this.targetBitmap=new createjs.Bitmap(this.targetBitmapData.canvas),this.transitionContainer.addChild(this.targetBitmap),this.transitionContainer.addChild(this.currentBitmap);var a={};a.index=1;var s=new createjs.Rectangle(0,0,i,n),r=t.logic.TransitionManager.getDelay(),o=this,h=this.option.color.colorRgb();createjs.Tween.get(a,{onChange:function(){var t=1-a.index,e=new createjs.ColorTransform(a.index,a.index,a.index,255,h[0]*t,h[1]*t,h[2]*t);o.currentBitmapData.colorTransform(s,e)}}).wait(r).to({index:0},this.option.duration,this.option.ease).call(this.toTarget,null,this)},i.prototype.toTarget=function(){var e=t.logic.LayoutManager.stageWidth,i=t.logic.LayoutManager.stageHeight,n=this,a=this.option.color.colorRgb(),s={},r=new createjs.Rectangle(0,0,e,i),o=this.targetBitmapData.getPixels(r);s.index=0,this.transitionContainer.removeChild(this.currentBitmap);var h=new createjs.ColorTransform(s.index,s.index,s.index,255,a[0],a[1],a[2]);n.targetBitmapData.colorTransform(r,h),createjs.Tween.get(s,{onChange:function(){var t=1-s.index;h=new createjs.ColorTransform(s.index,s.index,s.index,255,a[0]*t,a[1]*t,a[2]*t);try{n.targetBitmapData.setPixels(r,o),n.targetBitmapData.colorTransform(r,h)}catch(t){}}}).to({index:1},this.option.duration,this.option.ease).call(this.onFinished,null,this)},i}(e.AbstractEffect);e.FadeColorEffect=i}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(i){var n=function(i){function n(t,e){return i.call(this,t,e)||this}return __extends(n,i),n.prototype.run=function(){i.prototype.run.call(this),this.currentBitmap=new createjs.Bitmap(this.currentBitmapData.canvas),this.targetBitmap=new createjs.Bitmap(this.targetBitmapData.canvas),this.transitionContainer.addChild(this.currentBitmap),this.transitionContainer.addChild(this.targetBitmap);var n={},a=t.logic.LayoutManager.stageWidth,s=t.logic.LayoutManager.stageHeight;switch(this.option.direction){default:case e.EffectDirection.B_T:this.targetBitmap.x=0,this.targetBitmap.y=s,n.y=0;break;case e.EffectDirection.T_B:this.targetBitmap.x=0,this.targetBitmap.y=-s,n.y=0;break;case e.EffectDirection.L_R:this.targetBitmap.x=-a,this.targetBitmap.y=0,n.x=0;break;case e.EffectDirection.R_L:this.targetBitmap.x=a,this.targetBitmap.y=0,n.x=0}createjs.Tween.get(this.targetBitmap).wait(t.logic.TransitionManager.getDelay()).to(n,this.option.duration,this.option.ease).call(this.onFinished,null,this)},n}(i.AbstractEffect);i.MoveInEffect=n}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i;!function(i){var n=function(i){function n(t,e){return i.call(this,t,e)||this}return __extends(n,i),n.prototype.destory=function(){i.prototype.destory.call(this),this.tranBitmapData&&this.tranBitmapData.dispose()},n.prototype.setEffect=function(){this.webgl=!0;var i=t.logic.LayoutManager.stageWidth,n=t.logic.LayoutManager.stageHeight,a=new createjs.Rectangle(0,0,i,n),s={};switch(this.option.direction){default:case e.EffectDirection.B_T:this.tranBitmapData=new createjs.BitmapData(null,i,2*n),this.tranBitmapData.copyPixels(this.currentBitmapData,a,new createjs.Point(0,0)),this.tranBitmapData.copyPixels(this.targetBitmapData,a,new createjs.Point(0,n)),this.currentBitmap=new createjs.Bitmap(this.tranBitmapData.canvas),s.y=-n;break;case e.EffectDirection.T_B:this.tranBitmapData=new createjs.BitmapData(null,i,2*n),this.tranBitmapData.copyPixels(this.targetBitmapData,a,new createjs.Point(0,0)),this.tranBitmapData.copyPixels(this.currentBitmapData,a,new createjs.Point(0,n)),this.currentBitmap=new createjs.Bitmap(this.tranBitmapData.canvas),this.currentBitmap.y=-n,s.y=0;break;case e.EffectDirection.L_R:console.log("Left_Right"),this.tranBitmapData=new createjs.BitmapData(null,2*i,n),this.tranBitmapData.copyPixels(this.targetBitmapData,a,new createjs.Point(0,0)),this.tranBitmapData.copyPixels(this.currentBitmapData,a,new createjs.Point(i)),this.currentBitmap=new createjs.Bitmap(this.tranBitmapData.canvas),this.currentBitmap.x=-i,s.x=0;break;case e.EffectDirection.R_L:console.log("Right_Left"),this.tranBitmapData=new createjs.BitmapData(null,2*i,n),this.tranBitmapData.copyPixels(this.currentBitmapData,a,new createjs.Point(0,0)),this.tranBitmapData.copyPixels(this.targetBitmapData,a,new createjs.Point(i,0)),this.currentBitmap=new createjs.Bitmap(this.tranBitmapData.canvas),s.x=-i}this.transitionContainer.addChild(this.currentBitmap),createjs.Tween.get(this.currentBitmap).wait(t.logic.TransitionManager.getDelay()).to(s,this.option.duration,this.option.ease).call(this.onFinished,null,this)},n.prototype.run=function(){i.prototype.run.call(this),this.setEffect()},n}(i.AbstractEffect);i.PushEffect=n}(i=e.effect||(e.effect={}))}(e=t.transition||(t.transition={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,t)||this;return i.target=t,i.pageSwipe=new neoges.SwipeGesture(t),i.enable(),i}return __extends(i,e),i.prototype.enable=function(){this._stats=1,this.pageSwipe.on(neoges.GestureEvent.ENDED,this.onSwipeEnd,this)},i.prototype.disalbe=function(){this._stats=0,this.pageSwipe.off(neoges.GestureEvent.ENDED,this.onSwipeEnd,this)},i.prototype.destory=function(){this.disalbe(),this.pageSwipe=null},i.prototype.onSwipeEnd=function(t){1==t.offsetY?this.onGestureSwipeDown():t.offsetY==-1&&this.onGestureSwipeUp(),1==t.offsetX?this.onGestureSwipeRight():t.offsetX==-1&&this.onGestureSwipeLeft()},i.prototype.onGestureSwipeUp=function(){var e=new t.event.TriggerEvent(t.event.TriggerEvent.INPUT);e.trigger=t.trigger.TriggerKey.swipe_up,t.logic.TriggerManager.dispathcInput(e)},i.prototype.onGestureSwipeDown=function(){var e=new t.event.TriggerEvent(t.event.TriggerEvent.INPUT);e.trigger=t.trigger.TriggerKey.swipe_down,t.logic.TriggerManager.dispathcInput(e)},i.prototype.onGestureSwipeRight=function(){var e=new t.event.TriggerEvent(t.event.TriggerEvent.INPUT);e.trigger=t.trigger.TriggerKey.swipe_right,t.logic.TriggerManager.dispathcInput(e)},i.prototype.onGestureSwipeLeft=function(){var e=new t.event.TriggerEvent(t.event.TriggerEvent.INPUT);e.trigger=t.trigger.TriggerKey.swipe_left,t.logic.TriggerManager.dispathcInput(e)},i}(t.trigger.AbstractTrigger);e.SwipeTrigger=i}(e=t.trigger||(t.trigger={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,t)||this;return i.target=t,i.enable(),i}return __extends(i,e),i.prototype.enable=function(){this._stats=1,this.target.on("click",this.onTap,this)},i.prototype.disalbe=function(){this._stats=0,this.target.off(t.MouseEvent.Tap,this.onTap,this)},i.prototype.destory=function(){this.disalbe()},i.prototype.onTap=function(e){var i=new t.event.TriggerEvent(t.event.TriggerEvent.INPUT);i.trigger=t.trigger.TriggerKey.tap,t.logic.TriggerManager.dispathcInput(i)},i}(t.trigger.AbstractTrigger);e.TapTrigger=i}(e=t.trigger||(t.trigger={}))}(mcjs||(mcjs={}));var neoges;!function(t){var e=function(){function e(){}return e.distance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.addHost=function(e){var i=t.GestureManager.hostCollection;return i.indexOf(e)!=-1?void console.warn("不要重复添加手势实例"):(t.GestureManager.registerEvent(e.target),i.push(e),void(t.GestureManager.eventDict[e.target.id]=[]))},e.removeHost=function(e){var i=t.GestureManager.hostCollection,n=i.indexOf(e);return n==-1?void console.warn("不存在这个实例"):(i.slice(n,1),t.GestureManager.removeEvent(e.target),void(t.GestureManager.eventDict[e.target.id]=null))},e.registerEvent=function(e){t.GestureManager.hostCollection;e.on("mousedown",t.GestureManager.touchedHandler,e)},e.removeEvent=function(e){t.GestureManager.hostCollection;e.off("mousedown",t.GestureManager.touchedHandler,e)},e.touchedHandler=function(e){var i,n=mcjs.Main.stage;"mousedown"==e.type?(i=e.currentTarget,t.GestureManager.currentTouchObject=i,n.off("pressmove",t.GestureManager.touchedHandler,n),n.on("pressmove",t.GestureManager.touchedHandler,n),n.off("pressup",t.GestureManager.touchedHandler,n),n.on("pressup",t.GestureManager.touchedHandler,n),n.off("mouseout",t.GestureManager.leaveStageHandler,n),n.on("mouseout",t.GestureManager.leaveStageHandler,n)):i=t.GestureManager.currentTouchObject,null==t.GestureManager.eventDict[i.id]&&(t.GestureManager.eventDict[i.id]=[]);var a,s=t.GestureManager.eventDict[i.id];t.GestureManager.hasTouchEvent(e)?(a=t.GestureManager.getTouchEventByID(e.pointerID,i),t.GestureManager.evtPool.setProperties(e,a)):(a=t.GestureManager.evtPool.clone(e),s.push(a));for(var r,o=t.GestureManager.hostCollection,h=0;h<o.length;h++)r=o[h],r.target==i&&r.onTouch(s);"pressup"==a.type&&t.GestureManager.removeAllEvent(),t.GestureManager.showTouchPoint&&t.GestureManager.drawTouchPoint()},e.hasTouchEvent=function(e){for(var i=t.GestureManager.currentTouchObject,n=t.GestureManager.eventDict[i.id],a=0;a<n.length;a++)if(n[a].pointerID==e.pointerID)return!0;return!1},e.getTouchEventByID=function(e,i){for(var n=t.GestureManager.eventDict[i.id],a=0;a<n.length;a++)if(n[a].pointerID==e)return n[a];return null},e.leaveStageHandler=function(e){t.GestureManager.removeAllEvent()},e.removeAllEvent=function(){var e=mcjs.Main.stage;for(var i in t.GestureManager.eventDict){var n=t.GestureManager.eventDict[i];null!=n&&t.GestureManager.evtPool.reclaimAll(n)}e.off("pressmove",t.GestureManager.touchedHandler,e),e.off("pressup",t.GestureManager.touchedHandler,e),e.off("mouseout",t.GestureManager.leaveStageHandler,e),t.GestureManager.drawTouchPoint()},e.drawTouchPoint=function(){if(null!=t.GestureManager.currentTouchObject){var e=t.GestureManager.drawLayer,i=mcjs.Main.stage;null==e.stage&&i.addChild(e);var n=e.graphics;e.alpha=.4,n.clear(),n.beginFill("#000000");var a;for(var s in t.GestureManager.eventDict)if(t.GestureManager.currentTouchObject.id==Number(s)){var r=t.GestureManager.eventDict[s];if(null!=r&&r.length>0)for(var o=0;o<r.length;o++)a=r[o],n.drawCircle(a.stageX,a.stageY,10)}r=t.GestureManager.simulatePoints;for(var o=0;o<r.length;o++)a=r[o],n.drawCircle(a.stageX,a.stageY,10);n.endFill()}},e}();e.showTouchPoint=!1,e.simulateMultitouch=!1,e.simulatePoints=[],e.hostCollection=[],e.eventDict={},e.evtPool=new t.EventPool,e.drawLayer=new createjs.Shape,t.GestureManager=e}(neoges||(neoges={}));var mcjs;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.content="Loading... ",t.createView(),t}return __extends(i,e),i.prototype.createView=function(){this.visible=!1,this.textField=new createjs.Text,this.textField.color="#000",this.textField.font="Bold 25px Arial",this.textField.text=this.content+" 0%",this.textField.x=(t.logic.LayoutManager.stageWidth-this.textField.getBounds().width)/2,this.textField.y=(t.logic.LayoutManager.stageHeight-this.textField.getBounds().height)/2,this.addChild(this.textField)},i.prototype.show=function(){this.visible||(this.visible=!0,this.on("tick",this.onEnterFrame,this))},i.prototype.hide=function(){this.visible&&(this.visible=!1,this.off("tick",this.onEnterFrame,this))},i.prototype.setProgress=function(t){this.textField.text=this.content+"  "+Math.ceil(100*t)+"%"},i.prototype.onEnterFrame=function(){},i}(createjs.Container);t.ContentLoadingUI=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.init=function(t){this._isEdit=t,this._isPreview=!1},Object.defineProperty(i,"isEnabled",{get:function(){return this._isEdit},enumerable:!0,configurable:!0}),Object.defineProperty(i,"isPreview",{get:function(){if(this._isPreview)return this._isPreview=!1,!0},enumerable:!0,configurable:!0}),i.updateList=function(t){console.log("updateList",t)},i.load=function(e){this.lastData=e;var i={};for(var n in e)i[n]=e[n];i.src="http://preview.realplus.cc/"+i.src,t.logic.ViewManager.addViewByEdit(i)},i.preview=function(e,i){if(!this._isPreview){this._isPreview=!0,t.logic.ViewManager.transitionViewDirection="prev"==i?"prev":"next";var n={};for(var a in e)n[a]=e[a];n.src="http://preview.realplus.cc/"+n.src,t.logic.ViewManager.addViewByEdit(n,!0)}},i.backLast=function(){i.load(i.lastData)},i.getTransition=function(){return RealEdit.CjsManager.getTransition()},i}(t.event.StaticEventDispatcher);t.Edit=e}(mcjs||(mcjs={}));var mcjs;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.content="Loading... ",t.createView(),t}return __extends(i,e),i.prototype.createView=function(){this.visible=!1,this.textField=new createjs.Text,this.textField.color="#000",this.textField.font="Bold 25px Arial",this.textField.text=this.content+" 0%",this.textField.x=(t.logic.LayoutManager.stageWidth-this.textField.getBounds().width)/2,this.textField.y=(t.logic.LayoutManager.stageHeight-this.textField.getBounds().height)/2,this.addChild(this.textField)},i.prototype.show=function(){this.visible||(this.visible=!0,this.on("tick",this.onEnterFrame,this))},i.prototype.hide=function(){this.visible&&(this.visible=!1,this.off("tick",this.onEnterFrame,this))},i.prototype.setProgress=function(t){this.textField.text=this.content+"  "+Math.ceil(100*t)+"%"},i.prototype.onEnterFrame=function(){},i}(createjs.Container);t.IndexLoadingUI=e}(mcjs||(mcjs={}));var trace=function(){function t(){}return t.init=function(t){this.isScreen&&(this.txtBlock=new createjs.Text,this.txtBlock.font="16px Arial",t.addChild(this.txtBlock))},t.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(this.isDebug){for(var n=t,a=0;a<e.length;a++)n+=","+e[a];console.log(n)}this.isScreen&&(this.txtBlock.lineHeight>mcjs.logic.LayoutManager.stageHeight?this.txtBlock.text=n:this.txtBlock.text=n+"\n"+this.txtBlock.text)},t}();trace.isDebug=!0,trace.isScreen=!1;var mcjs;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(createjs.Event);e.COMPLETE="complete",e.ERROR="error",e.FILE_ERROR="fileerror",e.FILE_PROGRESS="fileprogress",e.LOAD_START="loadstart",e.FILE_LOAD="fileload",e.FILE_START="filestart",e.PROGRESS="progress",t.LoaderQueueEvent=e}(e=t.event||(t.event={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.init=function(){createjs.Sound.registerPlugins([createjs.HTMLAudioPlugin,createjs.WebAudioPlugin]),createjs.Sound.alternateExtensions=["mp3"]},e.playMcSound=function(t,i){return void 0===i&&(i=!1),e.playSound(t,createjs.Sound.INTERRUPT_EARLY,0,0,i?1:0)},e.playSound=function(t,i,n,a,s,r,o){if(!e.mute)return createjs.Sound.play(t,i,n,a,s,r,o)},e.stopSound=function(t){createjs.Sound.removeSound(t)},e.stopAllSound=function(){createjs.Sound.removeAllSounds()},e.playBgSound=function(t){this.bgSound?this.bgSound.play({interrupt:createjs.Sound.INTERRUPT_ANY,loop:-1}):this.bgSound=this.playSound(t,createjs.Sound.INTERRUPT_ANY,0,0,-1)},e.stopBgSound=function(){this.bgSound&&this.bgSound.stop()},Object.defineProperty(e,"mute",{get:function(){return createjs.Sound.muted},set:function(t){createjs.Sound.muted=t},enumerable:!0,configurable:!0}),e}(t.event.StaticEventDispatcher);e.SoundManager=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.start=function(e,i,n){this.startDelayCount();var a=new t.transition.EffectOption(n);switch(a.key){case t.transition.EffectType.move_in:this.effectItem=new t.transition.effect.MoveInEffect;break;case t.transition.EffectType.push:this.effectItem=new t.transition.effect.PushEffect,a.ease=createjs.Ease.sineIn;break;case t.transition.EffectType.drop:this.effectItem=new t.transition.effect.DropEffect;break;case t.transition.EffectType.clothsline:this.effectItem=new t.transition.effect.ClothslineEffect;break;case t.transition.EffectType.fade_color:this.effectItem=new t.transition.effect.FadeColorEffect}this.disablePageContainer(),this.effectItem.setPage(e,i),this.effectItem.option=a,this.effectItem.on(this.TRANSITION_FINISHED,this.onTransitionFinished,this),this.effectItem.run()},i.stop=function(){t.logic.TransitionManager.stopRender(),t.logic.TransitionManager.effectItem&&(t.logic.TransitionManager.effectItem.destory(),t.logic.TransitionManager.effectItem=null)},i.onTransitionFinished=function(t){this.startDelayCount();var e=t.target;e.off(this.TRANSITION_FINISHED,this.onTransitionFinished,this),this.stopRender(),this.dispatchEvent(new createjs.Event(this.TRANSITION_FINISHED)),this.enablePageContainer(),this.stop()},i.init=function(t){this.pageContainer=t},i.startRender=function(){createjs.Ticker.addEventListener("tick",this.render)},i.stopRender=function(){createjs.Ticker.removeEventListener("tick",this.render)},i.render=function(e){t.Main.spriteStage.update()},i.disable=function(){this._enable=!1},i.enable=function(){this._enable=!0},i.getDelay=function(){return(new Date).getTime()-this.delayTime},i.startDelayCount=function(){this.delayTime=(new Date).getTime()},i.disablePageContainer=function(){this.pageContainer.cache(0,0,t.logic.LayoutManager.stageWidth,t.logic.LayoutManager.stageHeight),this.pageContainer.visible=!1},i.enablePageContainer=function(){this.pageContainer.visible=!0,this.pageContainer.uncache()},i}(t.event.StaticEventDispatcher);i.TRANSITION_FINISHED="Transition_Finished",i._enable=!0,e.TransitionManager=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.init=function(e){this.triggerArr=[],this.target=e;var i=new createjs.Shape;i.graphics.beginFill("#000000").drawRect(0,0,t.logic.LayoutManager.stageWidth,t.logic.LayoutManager.stageHeight),this.target.hitArea=i,this.addTrigger(new t.trigger.SwipeTrigger(e)),this.addTrigger(new t.trigger.TapTrigger(e)),this.enable(),this.time=(new Date).getTime()},i.addTrigger=function(t){this.triggerArr.push(t)},i.dispathcInput=function(e){t.logic.ViewManager.currentPage.dispatchEvent(e),this.dispatchEvent(e)},i.disable=function(){this.target.mouseEnabled=!1},i.enable=function(){this.target.mouseEnabled=!0},i}(t.event.StaticEventDispatcher);e.TriggerManager=i}(e=t.logic||(t.logic={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(i){function n(){var t=i.call(this)||this;return t.totalLayerNum=5,t.logoContainer=new createjs.Container,t.introContainer=new createjs.Container,t.topContainer=new createjs.Container,t.bgContainer=new createjs.Container,t.pageContainer=new createjs.Container,t.naviContainer=new createjs.Container,t.scoreContainer=new createjs.Container,t.transitionContainer=new createjs.Container,t}return __extends(n,i),n.prototype.init=function(){this.addChild(this.bgContainer),this.addChild(this.pageContainer),this.addChild(this.transitionContainer),this.addChild(this.introContainer),this.addChild(this.naviContainer),this.addChild(this.scoreContainer),this.addChild(this.logoContainer),this.addChild(this.topContainer)},n.prototype.onNaviComplete=function(e){this.navi.removeEventListener(t.ui.PageView.OUTRO_FINISHED,this.onNaviComplete,this)},n.prototype.startPage=function(){this.buildLogo(),this.dispatchEvent(new createjs.Event(e.PageView.INTRO_FINISHED))},n.prototype.closePage=function(){},n.prototype.buildLogo=function(){var e=t.logic.LayoutManager.scaleRate;this.logo=new createjs.Bitmap,this.logo.image=t.RES.imgs.logo,this.logo.scaleX=this.logo.scaleY=e,this.logo.x=.05*t.logic.LayoutManager.stageWidth,this.logo.y=this.logo.x,this.logoContainer.addChild(this.logo)},n.prototype.buildUI=function(){},n}(e.BaseView);e.StageLayout=i}(e=t.ui||(t.ui={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(e){var i=function(){function e(){
this.isTran=!1,this.isIntroStart=!1,this.isIntroFinished=!1,this.isOutroStart=!1,this.isOutroFinished=!1,this.userData={}}return e.prototype.clear=function(){this.pageView=null,this.userData=null},e.prototype.setTranData=function(e){e?(this.nextData=e.next||t.RES.defaultJson.transition_globe.next,this.prevData=e.prev||t.RES.defaultJson.transition_globe.prev,this.forceTran=e.forceTran||t.RES.defaultJson.transition_globe.forceTran):(this.nextData=t.RES.defaultJson.transition_globe.next,this.prevData=t.RES.defaultJson.transition_globe.prev,this.forceTran=t.RES.defaultJson.transition_globe.forceTran)},e.prototype.checkTrigger=function(e){var i=this,n="none";return console.log("checkTrigger",this.triggerResult),this.nextData&&"next"!=this.triggerResult&&this.nextData.trigger.forEach(function(a,s){if(console.log("next",a+"."+t.trigger.TriggerKey[a],e),e==t.trigger.TriggerKey[a])return console.log("trigger",a),void(i.triggerResult=n="next")}),this.prevData&&"prev"!=this.triggerResult&&this.prevData.trigger.forEach(function(a,s){if(console.log("prev",a+"."+t.trigger.TriggerKey[a],e),e==t.trigger.TriggerKey[a])return console.log("trigger",a),void(i.triggerResult=n="prev")}),n},e}();i.CurViewStop_And_TargetViewIntroStart=-1,i.TargetViewIntroStart_Wait_CurViewOutroStart=0,i.CurViewOutroStart_Wait_TargetViewIntroStart=1,i.TargetViewIntroStart_And_CurViewOutroStart=2,i.TargetViewIntroFinsided_Wait_CurViewOutroFinished=3,i.TargetView_Is_Open=99999,e.ViewData=i}(e=t.ui||(t.ui={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return t.prototype.draw=function(t,e){void 0===e&&(e=0),t.moveTo(0,0),t.lineTo(this._x,this._y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.zero=function(){return this._x=0,this._y=0,this},t.prototype.isZero=function(){return 0==this._x&&0==this._y},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(t){var e=this.angle;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(t){var e=this.length;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},enumerable:!0,configurable:!0}),t.prototype.normalize=function(){if(0==this.length)return this._x=1,this;var t=this.length;return this._x/=t,this._y/=t,this},t.prototype.truncate=function(t){return this.length=Math.min(t,this.length),this},t.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},t.prototype.isNormalized=function(){return 1==this.length},t.prototype.dotProd=function(t){return this._x*t.x+this._y*t.y},t.prototype.crossProd=function(t){return this._x*t.y-this._y*t.x},t.angleBetween=function(t,e){return t.isNormalized()||(t=t.clone().normalize()),e.isNormalized()||(e=e.clone().normalize()),Math.acos(t.dotProd(e))},t.prototype.sign=function(t){return this.perp.dotProd(t)<0?-1:1},Object.defineProperty(t.prototype,"perp",{get:function(){return new t(-this.y,this.x)},enumerable:!0,configurable:!0}),t.prototype.dist=function(t){return Math.sqrt(this.distSQ(t))},t.prototype.distSQ=function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},t.prototype.add=function(e){return new t(this._x+e.x,this._y+e.y)},t.prototype.subtract=function(e){return new t(this._x-e.x,this._y-e.y)},t.prototype.multiply=function(e){return new t(this._x*e,this._y*e)},t.prototype.divide=function(e){return new t(this._x/e,this._y/e)},t.prototype.equals=function(t){return this._x==t.x&&this._y==t.y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[Vector2D (x:"+this._x+", y:"+this._y+")]"},t}();t.Vector2D=e}(e=t.util||(t.util={}))}(mcjs||(mcjs={}));var mcjs;!function(t){var e;!function(t){var e=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),a=Array(16),s=0;s<16;s++)n[s]=909522486^i[s],a[s]=1549556828^i[s];var r=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(a.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",a=0;a<t.length;a++)e=t.charCodeAt(a),n+=i.charAt(e>>>4&15)+i.charAt(15&e);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=t.length,a=0;a<n;a+=3)for(var s=t.charCodeAt(a)<<16|(a+1<n?t.charCodeAt(a+1)<<8:0)|(a+2<n?t.charCodeAt(a+2):0),r=0;r<4;r++)i+=8*a+6*r>8*t.length?this.b64pad:e.charAt(s>>>6*(3-r)&63);return i},t.prototype.rstr2any=function(t,e){var i,n,a,s,r,o=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(c);for(n=0;n<c;n++){for(r=Array(),s=0,i=0;i<h.length;i++)s=(s<<16)+h[i],a=Math.floor(s/o),s-=a*o,(r.length>0||a>0)&&(r[r.length]=a);u[n]=s,h=r}var g="";for(i=u.length-1;i>=0;i--)g+=e.charAt(u[i]);return g},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",a=-1;++a<t.length;)e=t.charCodeAt(a),i=a+1<t.length?t.charCodeAt(a+1):0,55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e=65536+((1023&e)<<10)+(1023&i),a++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,a=-1732584194,s=271733878,r=0;r<t.length;r+=16){var o=i,h=n,c=a,u=s;i=this.md5_ff(i,n,a,s,t[r+0],7,-680876936),s=this.md5_ff(s,i,n,a,t[r+1],12,-389564586),a=this.md5_ff(a,s,i,n,t[r+2],17,606105819),n=this.md5_ff(n,a,s,i,t[r+3],22,-1044525330),i=this.md5_ff(i,n,a,s,t[r+4],7,-176418897),s=this.md5_ff(s,i,n,a,t[r+5],12,1200080426),a=this.md5_ff(a,s,i,n,t[r+6],17,-1473231341),n=this.md5_ff(n,a,s,i,t[r+7],22,-45705983),i=this.md5_ff(i,n,a,s,t[r+8],7,1770035416),s=this.md5_ff(s,i,n,a,t[r+9],12,-1958414417),a=this.md5_ff(a,s,i,n,t[r+10],17,-42063),n=this.md5_ff(n,a,s,i,t[r+11],22,-1990404162),i=this.md5_ff(i,n,a,s,t[r+12],7,1804603682),s=this.md5_ff(s,i,n,a,t[r+13],12,-40341101),a=this.md5_ff(a,s,i,n,t[r+14],17,-1502002290),n=this.md5_ff(n,a,s,i,t[r+15],22,1236535329),i=this.md5_gg(i,n,a,s,t[r+1],5,-165796510),s=this.md5_gg(s,i,n,a,t[r+6],9,-1069501632),a=this.md5_gg(a,s,i,n,t[r+11],14,643717713),n=this.md5_gg(n,a,s,i,t[r+0],20,-373897302),i=this.md5_gg(i,n,a,s,t[r+5],5,-701558691),s=this.md5_gg(s,i,n,a,t[r+10],9,38016083),a=this.md5_gg(a,s,i,n,t[r+15],14,-660478335),n=this.md5_gg(n,a,s,i,t[r+4],20,-405537848),i=this.md5_gg(i,n,a,s,t[r+9],5,568446438),s=this.md5_gg(s,i,n,a,t[r+14],9,-1019803690),a=this.md5_gg(a,s,i,n,t[r+3],14,-187363961),n=this.md5_gg(n,a,s,i,t[r+8],20,1163531501),i=this.md5_gg(i,n,a,s,t[r+13],5,-1444681467),s=this.md5_gg(s,i,n,a,t[r+2],9,-51403784),a=this.md5_gg(a,s,i,n,t[r+7],14,1735328473),n=this.md5_gg(n,a,s,i,t[r+12],20,-1926607734),i=this.md5_hh(i,n,a,s,t[r+5],4,-378558),s=this.md5_hh(s,i,n,a,t[r+8],11,-2022574463),a=this.md5_hh(a,s,i,n,t[r+11],16,1839030562),n=this.md5_hh(n,a,s,i,t[r+14],23,-35309556),i=this.md5_hh(i,n,a,s,t[r+1],4,-1530992060),s=this.md5_hh(s,i,n,a,t[r+4],11,1272893353),a=this.md5_hh(a,s,i,n,t[r+7],16,-155497632),n=this.md5_hh(n,a,s,i,t[r+10],23,-1094730640),i=this.md5_hh(i,n,a,s,t[r+13],4,681279174),s=this.md5_hh(s,i,n,a,t[r+0],11,-358537222),a=this.md5_hh(a,s,i,n,t[r+3],16,-722521979),n=this.md5_hh(n,a,s,i,t[r+6],23,76029189),i=this.md5_hh(i,n,a,s,t[r+9],4,-640364487),s=this.md5_hh(s,i,n,a,t[r+12],11,-421815835),a=this.md5_hh(a,s,i,n,t[r+15],16,530742520),n=this.md5_hh(n,a,s,i,t[r+2],23,-995338651),i=this.md5_ii(i,n,a,s,t[r+0],6,-198630844),s=this.md5_ii(s,i,n,a,t[r+7],10,1126891415),a=this.md5_ii(a,s,i,n,t[r+14],15,-1416354905),n=this.md5_ii(n,a,s,i,t[r+5],21,-57434055),i=this.md5_ii(i,n,a,s,t[r+12],6,1700485571),s=this.md5_ii(s,i,n,a,t[r+3],10,-1894986606),a=this.md5_ii(a,s,i,n,t[r+10],15,-1051523),n=this.md5_ii(n,a,s,i,t[r+1],21,-2054922799),i=this.md5_ii(i,n,a,s,t[r+8],6,1873313359),s=this.md5_ii(s,i,n,a,t[r+15],10,-30611744),a=this.md5_ii(a,s,i,n,t[r+6],15,-1560198380),n=this.md5_ii(n,a,s,i,t[r+13],21,1309151649),i=this.md5_ii(i,n,a,s,t[r+4],6,-145523070),s=this.md5_ii(s,i,n,a,t[r+11],10,-1120210379),a=this.md5_ii(a,s,i,n,t[r+2],15,718787259),n=this.md5_ii(n,a,s,i,t[r+9],21,-343485551),i=this.safe_add(i,o),n=this.safe_add(n,h),a=this.safe_add(a,c),s=this.safe_add(s,u)}return[i,n,a,s]},t.prototype.md5_cmn=function(t,e,i,n,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,s)),a),i)},t.prototype.md5_ff=function(t,e,i,n,a,s,r){return this.md5_cmn(e&i|~e&n,t,e,a,s,r)},t.prototype.md5_gg=function(t,e,i,n,a,s,r){return this.md5_cmn(e&n|i&~n,t,e,a,s,r)},t.prototype.md5_hh=function(t,e,i,n,a,s,r){return this.md5_cmn(e^i^n,t,e,a,s,r)},t.prototype.md5_ii=function(t,e,i,n,a,s,r){return this.md5_cmn(i^(e|~n),t,e,a,s,r)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();t.md5=e}(e=t.util||(t.util={}))}(mcjs||(mcjs={}));var neoges;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,e)||this;return i.touchCount=0,i.isBegan=!1,i._useMultiPoints=!1,i}return __extends(e,t),e.prototype.onTouch=function(t){if(!(t.length>1)){var e=t[0];if("mousedown"==e.type){if(!this.isBegan){this.touchCount=0,this.isBegan=!0,this.gestureBegan(),clearTimeout(this.callID);var i=this;this.callID=setTimeout(function(){i.checkDoubleTapHandler()},500)}}else"pressup"==e.type&&this.isBegan&&(this.touchCount++,this.touchCount>=2&&this.gestureEnded())}},e.prototype.gestureEnded=function(){clearTimeout(this.callID),this.touchCount=0,this.isBegan=!1,t.prototype.gestureEnded.call(this)},e.prototype.checkDoubleTapHandler=function(){this.touchCount=0,this.isBegan=!1,this.gestureFailed()},e}(t.AbstractGesture);t.DoubleTapGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,e)||this;return i.isBegan=!1,i._useMultiPoints=!1,i}return __extends(e,t),e.prototype.onTouch=function(t){if(!(t.length>1)){var e=t[0];if("mousedown"==e.type){this.isBegan=!0,this.gestureBegan(),clearTimeout(this.callID);var i=this;this.callID=setTimeout(function(){i.checkTimeHandler},2e3)}else"pressup"==e.type&&this.isBegan&&(clearTimeout(this.callID),this.isBegan=!1,this.gestureFailed())}},e.prototype.gestureEnded=function(){clearTimeout(this.callID),this.isBegan=!1,t.prototype.gestureEnded.call(this)},e.prototype.checkTimeHandler=function(){this.gestureEnded()},e}(t.AbstractGesture);t.LongPressGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i._useMultiPoints=!1,i}return __extends(i,e),i.prototype.onTouch=function(e){if(!(e.length>1||t.GestureManager.simulateMultitouch)){var i=e[0];"mousedown"==i.type?(this.gestureBegan(),this._startPoint=new createjs.Point(i.stageX,i.stageY)):"pressmove"==i.type?(this._endPoint=new createjs.Point(i.stageX,i.stageY),this.gestureUpdate()):"pressup"==i.type&&this.gestureEnded()}},i.prototype.gestureUpdate=function(){this._stats=2;var e=new t.GestureEvent(t.GestureEvent.UPDATE);e.host=this.target,e.offsetX=this._endPoint.x-this._startPoint.x,e.offsetY=this._endPoint.y-this._startPoint.y,this.dispatchEvent(e)},i}(t.AbstractGesture);t.PanGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i.startLen=0,i.currentLen=0,i._useMultiPoints=!0,i}return __extends(i,e),i.prototype.onTouch=function(e){var i,n,a=e;t.GestureManager.simulateMultitouch&&(i=e[0],n=this.reverseEvent(i),t.GestureManager.simulatePoints=[n],a=[i,n]),a.length<2||(i=a[0],n=a[1],"mousedown"==n.type?(this.gestureBegan(),this.startLen=t.GestureManager.distance(new createjs.Point(i.stageX,i.stageY),new createjs.Point(n.stageX,n.stageY))):"pressmove"==i.type||"pressmove"==n.type?(this.currentLen=t.GestureManager.distance(new createjs.Point(i.stageX,i.stageY),new createjs.Point(n.stageX,n.stageY)),this.gestureUpdate()):"pressup"!=i.type&&"pressup"!=n.type||(t.GestureManager.simulatePoints=[],this.gestureEnded()))},i.prototype.gestureUpdate=function(){this._stats=2;var e=new t.GestureEvent(t.GestureEvent.UPDATE);e.value=this.currentLen/this.startLen,e.host=this.target,this.dispatchEvent(e)},i.prototype.reverseEvent=function(t){var e=new createjs.MouseEvent(t.type),i=t.stageX,n=t.stageY,a=this.target,s=a.localToGlobal(a.regX,a.regY),r=i-s.x,o=n-s.y,h=new createjs.Point(s.x-r,s.y-o);return e.$stageX=h.x,e.$stageY=h.y,e},i}(t.AbstractGesture);t.PinchGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i._rotationStart=0,i._rotation=0,i._useMultiPoints=!0,i}return __extends(i,e),i.prototype.onTouch=function(e){var i,n,a=e;if(t.GestureManager.simulateMultitouch&&(i=e[0],n=this.reverseEvent(i),t.GestureManager.simulatePoints=[n],a=[i,n]),!(a.length<2)){i=a[0],n=a[1];var s,r,o=new createjs.Point(i.stageX,i.stageY),h=new createjs.Point(n.stageX,n.stageY);"mousedown"==n.type?(this.gestureBegan(),this._transformVector=this.getCenterPoint(o,h),s=h.x-this._transformVector.x,r=h.y-this._transformVector.y,this._rotationStart=180*Math.atan2(s,r)/Math.PI):"pressmove"==i.type||"pressmove"==n.type?(s=h.x-this._transformVector.x,r=h.y-this._transformVector.y,this._rotation=this._rotationStart-180*Math.atan2(s,r)/Math.PI,this.gestureUpdate()):"pressup"!=i.type&&"pressup"!=n.type||(t.GestureManager.simulatePoints=[],this.gestureEnded())}},i.prototype.gestureUpdate=function(){this._stats=2;var e=new t.GestureEvent(t.GestureEvent.UPDATE);e.value=this._rotation,e.host=this.target,this.dispatchEvent(e)},i.prototype.getCenterPoint=function(t,e){var i=new createjs.Point;return i.x=t.x+(e.x-t.x)/2,i.y=t.y+(e.y-t.y)/2,i},i.prototype.reverseEvent=function(t){var e=new createjs.MouseEvent(t.type),i=t.stageX,n=t.stageY,a=this.target,s=a.localToGlobal(a.regX,a.regY),r=i-s.x,o=n-s.y,h=new createjs.Point(s.x-r,s.y-o);return e.$stageX=h.x,e.$stageY=h.y,e},i}(t.AbstractGesture);t.RotationGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i.isBegan=!1,i._useMultiPoints=!1,i}return __extends(i,e),i.prototype.onTouch=function(e){if(!(e.length>1)){var i=e[0];if("mousedown"==i.type){this.gestureBegan(),this.isBegan=!0,this._startPoint=new createjs.Point(i.stageX,i.stageY),clearTimeout(this.callID);var n=this;this.callID=setTimeout(function(){n.checkTimeHandler()},500)}else if("pressup"==i.type&&this.isBegan){clearTimeout(this.callID),this._endPoint=new createjs.Point(i.stageX,i.stageY);var a=Math.sqrt(Math.pow(this._startPoint.x-this._endPoint.x,2)+Math.pow(this._startPoint.y-this._endPoint.y,2));a<t.TapGesture.TAP_DISTANCE&&1==this._stats?this.gestureEnded():this.gestureFailed()}}},i.prototype.checkTimeHandler=function(){this.isBegan=!1,this.gestureFailed()},i}(t.AbstractGesture);e.TAP_DISTANCE=20,t.TapGesture=e}(neoges||(neoges={}));var neoges;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,t)||this;return i.slop=Math.round(20/252*240),i._offsetX=0,i._offsetY=0,i._rotation=0,i._scale=1,i.distance=0,i.startScale=1,i._useMultiPoints=!0,i}return __extends(i,e),i.prototype.onTouch=function(e){var i,n,a=e;if(t.GestureManager.simulateMultitouch&&(i=e[0],n=this.reverseEvent(i),t.GestureManager.simulatePoints=[n],a=[i,n]),!(a.length<2)){i=a[0],n=a[1];var s=new createjs.Point(i.stageX,i.stageY),r=new createjs.Point(n.stageX,n.stageY);if("mousedown"==n.type)this.gestureBegan(),this._transformVector=this.subtract(r,s),this.updateLocation(s,r),this.distance=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),this.startScale=this.target.scaleX;else if("pressmove"==i.type||"pressmove"==n.type){var o=this._location.clone();this.updateLocation(s,r);var h;h=this.subtract(r,s),this._offsetX=this._location.x-o.x,this._offsetY=this._location.y-o.y,this._rotation=Math.atan2(h.y,h.x)-Math.atan2(this._transformVector.y,this._transformVector.x);var c=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2));this._scale=this.startScale*(c/this.distance),this._transformVector=this.subtract(r,s),this.gestureUpdate()}else"pressup"!=i.type&&"pressup"!=n.type||(t.GestureManager.simulatePoints=[],this.gestureEnded())}},i.prototype.gestureUpdate=function(){this._stats=2;var e=new t.GestureEvent(t.GestureEvent.UPDATE);e.rotation=this._rotation,e.scale=this._scale,e.offsetX=this._offsetX,e.offsetY=this._offsetY,e.host=this.target,this.dispatchEvent(e)},i.prototype.updateLocation=function(t,e){var i=new createjs.Point;i.x=(t.x+e.x)/2,i.y=(t.y+e.y)/2,this._location=i},i.prototype.reverseEvent=function(t){var e=new createjs.MouseEvent(t.type),i=t.stageX,n=t.stageY,a=this.target,s=a.localToGlobal(.5*a.getBounds().width,.5*a.getBounds().height),r=i-s.x,o=n-s.y,h=new createjs.Point(s.x-r,s.y-o);return e.$stageX=h.x,e.$stageY=h.y,e},i}(t.AbstractGesture);t.TransformGesture=e}(neoges||(neoges={}));